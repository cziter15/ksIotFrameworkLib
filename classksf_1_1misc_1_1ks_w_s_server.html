<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Doxygen with github: ksf::misc::ksWSServer Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Doxygen with github
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>ksf</b></li><li class="navelem"><b>misc</b></li><li class="navelem"><a class="el" href="classksf_1_1misc_1_1ks_w_s_server.html">ksWSServer</a></li>  </ul>
</div>
</div><!-- top -->
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classksf_1_1misc_1_1ks_w_s_server-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">ksf::misc::ksWSServer Class Reference</div></div>
</div><!--header-->
<div class="contents">

<p>A wrapper around WebSocketsServerCore that adds WebSocket authentication and enhanced message handling.  
 <a href="#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="ks_w_s_server_8h_source.html">ksWSServer.h</a>&gt;</code></p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Inheritance diagram for ksf::misc::ksWSServer:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
 <div class="center">
  <img src="classksf_1_1misc_1_1ks_w_s_server.png" alt=""/>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a450f4ebefd18543c646d577136774e72" id="r_a450f4ebefd18543c646d577136774e72"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a450f4ebefd18543c646d577136774e72">ksWSServer</a> (uint16_t port)</td></tr>
<tr class="memdesc:a450f4ebefd18543c646d577136774e72"><td class="mdescLeft">&#160;</td><td class="mdescRight">Prepares ksWebServer on specified port without actually starting it.  <br /></td></tr>
<tr class="separator:a450f4ebefd18543c646d577136774e72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2224ec4f425cd7938cd89880cb5ce771" id="r_a2224ec4f425cd7938cd89880cb5ce771"><td class="memItemLeft" align="right" valign="top"><a id="a2224ec4f425cd7938cd89880cb5ce771" name="a2224ec4f425cd7938cd89880cb5ce771"></a>
virtual&#160;</td><td class="memItemRight" valign="bottom"><b>~ksWSServer</b> ()</td></tr>
<tr class="memdesc:a2224ec4f425cd7938cd89880cb5ce771"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructs the server, releasing the resources. <br /></td></tr>
<tr class="separator:a2224ec4f425cd7938cd89880cb5ce771"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81b95552fd9f0e4c49d59259ca5be2f0" id="r_a81b95552fd9f0e4c49d59259ca5be2f0"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#a81b95552fd9f0e4c49d59259ca5be2f0">getRequiredAuthToken</a> () const</td></tr>
<tr class="memdesc:a81b95552fd9f0e4c49d59259ca5be2f0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns simple authentication token for WebSocket authentication process.  <br /></td></tr>
<tr class="separator:a81b95552fd9f0e4c49d59259ca5be2f0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad7c5303434271a77957a113dad7a2c37" id="r_ad7c5303434271a77957a113dad7a2c37"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad7c5303434271a77957a113dad7a2c37">setRequiredAuthToken</a> (uint64_t authToken)</td></tr>
<tr class="memdesc:ad7c5303434271a77957a113dad7a2c37"><td class="mdescLeft">&#160;</td><td class="mdescRight">Sets simple authtoken for WebSocket authentication.  <br /></td></tr>
<tr class="separator:ad7c5303434271a77957a113dad7a2c37"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a30264ac138648d3ee913519cec7c5920" id="r_a30264ac138648d3ee913519cec7c5920"><td class="memItemLeft" align="right" valign="top"><a id="a30264ac138648d3ee913519cec7c5920" name="a30264ac138648d3ee913519cec7c5920"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>begin</b> ()</td></tr>
<tr class="memdesc:a30264ac138648d3ee913519cec7c5920"><td class="mdescLeft">&#160;</td><td class="mdescRight">Starts the server. <br /></td></tr>
<tr class="separator:a30264ac138648d3ee913519cec7c5920"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3807612909de8c2469cde02d7bcb3ab0" id="r_a3807612909de8c2469cde02d7bcb3ab0"><td class="memItemLeft" align="right" valign="top"><a id="a3807612909de8c2469cde02d7bcb3ab0" name="a3807612909de8c2469cde02d7bcb3ab0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>loop</b> ()</td></tr>
<tr class="memdesc:a3807612909de8c2469cde02d7bcb3ab0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handles WebSocket server logic. <br /></td></tr>
<tr class="separator:a3807612909de8c2469cde02d7bcb3ab0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab6465499a17fef0e369e9f0f5802ef13" id="r_ab6465499a17fef0e369e9f0f5802ef13"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ab6465499a17fef0e369e9f0f5802ef13">setMessageHandler</a> (ksWsServerMessageFunc_t func)</td></tr>
<tr class="memdesc:ab6465499a17fef0e369e9f0f5802ef13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Installs a message handler to receive WebSocket text messages.  <br /></td></tr>
<tr class="separator:ab6465499a17fef0e369e9f0f5802ef13"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-methods" name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:ad15ba719689c843931612f3c9d41111b" id="r_ad15ba719689c843931612f3c9d41111b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ad15ba719689c843931612f3c9d41111b">handleNonWebsocketConnection</a> (WSclient_t *client) override</td></tr>
<tr class="memdesc:ad15ba719689c843931612f3c9d41111b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handler for non-WebSocket connections on websocket port.  <br /></td></tr>
<tr class="separator:ad15ba719689c843931612f3c9d41111b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pro-attribs" name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:a169aaf6bac76dfc12f9137307ad190dd" id="r_a169aaf6bac76dfc12f9137307ad190dd"><td class="memItemLeft" align="right" valign="top"><a id="a169aaf6bac76dfc12f9137307ad190dd" name="a169aaf6bac76dfc12f9137307ad190dd"></a>
std::unique_ptr&lt; WEBSOCKETS_NETWORK_SERVER_CLASS &gt;&#160;</td><td class="memItemRight" valign="bottom"><b>wsListener</b></td></tr>
<tr class="memdesc:a169aaf6bac76dfc12f9137307ad190dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">WS server (listener). <br /></td></tr>
<tr class="separator:a169aaf6bac76dfc12f9137307ad190dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e142ee4cd90503c7f7d718c872d6134" id="r_a2e142ee4cd90503c7f7d718c872d6134"><td class="memItemLeft" align="right" valign="top"><a id="a2e142ee4cd90503c7f7d718c872d6134" name="a2e142ee4cd90503c7f7d718c872d6134"></a>
uint64_t&#160;</td><td class="memItemRight" valign="bottom"><b>requiredAuthToken</b> {0}</td></tr>
<tr class="memdesc:a2e142ee4cd90503c7f7d718c872d6134"><td class="mdescLeft">&#160;</td><td class="mdescRight">WS auth token. <br /></td></tr>
<tr class="separator:a2e142ee4cd90503c7f7d718c872d6134"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a507b6d18fbe0c211bec2bb593173d885" id="r_a507b6d18fbe0c211bec2bb593173d885"><td class="memItemLeft" align="right" valign="top"><a id="a507b6d18fbe0c211bec2bb593173d885" name="a507b6d18fbe0c211bec2bb593173d885"></a>
ksWsServerMessageFunc_t&#160;</td><td class="memItemRight" valign="bottom"><b>onWebsocketTextMessage</b></td></tr>
<tr class="memdesc:a507b6d18fbe0c211bec2bb593173d885"><td class="mdescLeft">&#160;</td><td class="mdescRight">Callback function to receive messages. <br /></td></tr>
<tr class="separator:a507b6d18fbe0c211bec2bb593173d885"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>A wrapper around WebSocketsServerCore that adds WebSocket authentication and enhanced message handling. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a450f4ebefd18543c646d577136774e72" name="a450f4ebefd18543c646d577136774e72"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a450f4ebefd18543c646d577136774e72">&#9670;&#160;</a></span>ksWSServer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ksf::misc::ksWSServer::ksWSServer </td>
          <td>(</td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>port</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Prepares ksWebServer on specified port without actually starting it. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">port</td><td>Port to listen for incoming WebSocket connections. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a81b95552fd9f0e4c49d59259ca5be2f0" name="a81b95552fd9f0e4c49d59259ca5be2f0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a81b95552fd9f0e4c49d59259ca5be2f0">&#9670;&#160;</a></span>getRequiredAuthToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t ksf::misc::ksWSServer::getRequiredAuthToken </td>
          <td>(</td>
          <td class="paramname"><span class="paramname"><em></em></span></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns simple authentication token for WebSocket authentication process. </p>
<p>The value 0 is considered to be empty token. Authentication token is set via <a class="el" href="#ad7c5303434271a77957a113dad7a2c37" title="Sets simple authtoken for WebSocket authentication.">setRequiredAuthToken()</a>.</p>
<p>Generally, this token should be generated earlier, then the WebServer should use Cookie to transmit it to the browser and then the browser should pass it with WebSocket requests (via HTTP Cookie header).</p>
<dl class="section return"><dt>Returns</dt><dd>Auth token for WebSocket </dd></dl>

<p class="reference">References <a class="el" href="#a2e142ee4cd90503c7f7d718c872d6134">requiredAuthToken</a>.</p>

</div>
</div>
<a id="ad15ba719689c843931612f3c9d41111b" name="ad15ba719689c843931612f3c9d41111b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad15ba719689c843931612f3c9d41111b">&#9670;&#160;</a></span>handleNonWebsocketConnection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void ksf::misc::ksWSServer::handleNonWebsocketConnection </td>
          <td>(</td>
          <td class="paramtype">WSclient_t *</td>          <td class="paramname"><span class="paramname"><em>client</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">override</span><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handler for non-WebSocket connections on websocket port. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">client</td><td>Pointer to the WSclient_t object. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ab6465499a17fef0e369e9f0f5802ef13" name="ab6465499a17fef0e369e9f0f5802ef13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab6465499a17fef0e369e9f0f5802ef13">&#9670;&#160;</a></span>setMessageHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ksf::misc::ksWSServer::setMessageHandler </td>
          <td>(</td>
          <td class="paramtype">ksWsServerMessageFunc_t</td>          <td class="paramname"><span class="paramname"><em>func</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Installs a message handler to receive WebSocket text messages. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">func</td><td>The message handler function. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="#a507b6d18fbe0c211bec2bb593173d885">onWebsocketTextMessage</a>.</p>

</div>
</div>
<a id="ad7c5303434271a77957a113dad7a2c37" name="ad7c5303434271a77957a113dad7a2c37"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad7c5303434271a77957a113dad7a2c37">&#9670;&#160;</a></span>setRequiredAuthToken()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ksf::misc::ksWSServer::setRequiredAuthToken </td>
          <td>(</td>
          <td class="paramtype">uint64_t</td>          <td class="paramname"><span class="paramname"><em>authToken</em></span></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Sets simple authtoken for WebSocket authentication. </p>
<p>The value 0 is considered to be invalid (no auth token). Auth token is set via <a class="el" href="#ad7c5303434271a77957a113dad7a2c37" title="Sets simple authtoken for WebSocket authentication.">setRequiredAuthToken()</a>. Generally, this token should be generated earlier, then the WebServer should use Cookie to transmit it to the browser and then the browser should pass it with WebSocket requests (via HTTP Cookie header).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">authToken</td><td>The token to set. </td></tr>
  </table>
  </dd>
</dl>

<p class="reference">References <a class="el" href="#a2e142ee4cd90503c7f7d718c872d6134">requiredAuthToken</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li>src/ksf/misc/<a class="el" href="ks_w_s_server_8h_source.html">ksWSServer.h</a></li>
<li>src/ksf/misc/<b>ksWSServer.cpp</b></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
